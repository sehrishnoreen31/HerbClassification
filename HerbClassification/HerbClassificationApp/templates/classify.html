{% extends "home.html" %}
{% load static %}
{% block title %}<title>Classify</title>{% endblock %}
{% block content %}

<div class="container mx-auto p-5 max-w-[500px] text-center min-h-screen">
    <form action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h1 class="text-2xl mb-4 font-bold">Classify Image</h1>

        <div class="mb-5">
            <label for="input-img" class="block mb-2">Upload an Image:</label>
            <input  onchange="loadFile(event)" type="file" name="image" id="input-img" accept="image/*" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
            <img src="" alt="Image Preview" id="preview" class="mx-auto max-w-[300px] max-h-[300px] mt-4 rounded border hidden">
        </div>

        <div class="btns space-x-4">
            <button type="submit" class="px-4 py-2 bg-green-700 text-white font-bold rounded hover:bg-green-600">Classify</button>
            <a href="{% url 'home' %}" class="px-4 py-2 bg-gray-300 text-black font-bold rounded hover:bg-gray-400">Back to Home</a>
        </div>
    </form>


    <div id="prediction" class="prediction mx-auto p-2 mt-5 max-w-[500px] max-h-[500px]">
        Prediction Will show here
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function (){
	const imgInput = document.getElementById('input-img');
	const imgPreview = document.getElementById('preview');

	imgInput.addEventListener('change', function (event){
		const file = event.target.files[0];
		if(file){
			preview.src = URL.createObjectURL(file);
			preview.classList.remove('hidden');
			preview.onload = function() {
				URL.revokeObjectURL(preview.src);
			};
		}
	});
});

</script>

{% endblock %}
